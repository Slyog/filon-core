name: FILON Secrets Guard

on:
  workflow_dispatch:
  schedule:
    - cron: "0 9 * * 1"  # weekly Monday check

jobs:
  check-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: üîç Verify required secrets
        run: |
          REQUIRED_SECRETS=("VERCEL_TOKEN" "VERCEL_ORG_ID" "VERCEL_PROJECT_ID" "DATABASE_URL")
          for key in "${REQUIRED_SECRETS[@]}"; do
            if [ -z "${!key}" ]; then
              echo "‚ùå Missing secret: $key"
              exit 1
            else
              echo "‚úÖ $key present"
            fi
          done
        env:
          VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
          VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
          VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
